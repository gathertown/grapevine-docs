---
title: Webhooks
description: Receive real-time notifications about events in Grapevine
---

Webhooks allow you to receive real-time notifications when events occur in Grapevine.

## Overview

Grapevine can send HTTP POST requests to your specified endpoint when documents change in your connected sources.

## Creating a webhook

Webhooks can only be created through the dashboard.

1. Navigate to Settings > Webhooks
2. Click "Create Webhook"
3. Enter your endpoint URL
4. Save the webhook

## Event types

### document.changed

Sent when any document is changed (created, updated, or deleted).

```json
{
  "event": "document.changed",
  "timestamp": "2024-01-15T10:30:00Z",
  "data": {
    "document_id": "doc_123",
    "source": "notion",
    "title": "Product Roadmap Q1 2024",
    "url": "https://notion.so/product-roadmap"
  }
}
```

## Verifying webhooks

Grapevine signs all webhook requests using HMAC-SHA256.

### Signature verification

```javascript
const crypto = require('crypto');

function verifyWebhook(payload, signature, secret) {
  const hmac = crypto.createHmac('sha256', secret);
  const digest = hmac.update(payload).digest('hex');
  return signature === digest;
}

// In your webhook handler
app.post('/webhooks/grapevine', (req, res) => {
  const signature = req.headers['x-grapevine-signature'];
  const payload = JSON.stringify(req.body);
  
  if (!verifyWebhook(payload, signature, process.env.WEBHOOK_SECRET)) {
    return res.status(401).send('Invalid signature');
  }
  
  // Process the webhook
  console.log('Received event:', req.body.event);
  res.status(200).send('OK');
});
```

## Best practices

- Always verify webhook signatures
- Respond with 200 status code quickly
- Process webhooks asynchronously
- Implement retry logic for failed processing
- Log all webhook events for debugging

## Retry policy

If your endpoint returns a non-2xx status code, Grapevine will retry:

- Immediately
- After 1 minute
- After 5 minutes
- After 15 minutes
- After 1 hour

After 5 failed attempts, the webhook will be disabled.
